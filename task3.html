<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>Лабораторна 2, Завдання 3: Матриця та обчислення (Варіант 23)</title>
<style>
    body { font-family: Arial, sans-serif; }
    .matrix-table input[type="text"] {
        width: 40px;
        text-align: center;
        border: 1px solid #ccc;
        padding: 5px;
        margin: 2px;
    }
    .matrix-table td {
        padding: 0;
    }
    table {
        border-collapse: collapse;
    }
    #main_div {
        margin-top: 20px;
        min-height: 100px;
        border: 1px solid #eee;
        padding: 5px;
    }
</style>
<script>
    let str, stb;

    // Функція для побудови матриці
    function fun() {
        // Отримання та перетворення введених значень
        str = parseInt(main_form.t_str.value);
        stb = parseInt(main_form.t_stb.value);

        if (isNaN(str) || isNaN(stb) || str <= 0 || stb <= 0) {
            alert("Будь ласка, введіть коректну кількість рядків та стовпців.");
            return;
        }

        let res_str = "<table class='matrix-table'>\n";
        
        // Цикли для створення рядків (i) та стовпців (j), починаючи з 1
        for(let i = 1; i <= str; i++) {
            res_str += "<tr>\n";
            for(let j = 1; j <= stb; j++) {
                // ФОРМУЛА ВАРІАНТА 23: A_ij = 11i - j
                let value = (11 * i) - j; 

                res_str += "<td>";
                // ID елемента: _i_j, Значення: за формулою
                res_str += "<input type=\"text\" name=\"_" + i + "_" + j + "\" value=\"" + value + "\">";
                res_str += "</td>\n";
            }
            res_str += "</tr>\n";
        }
        res_str += "</table>";
        
        // Вставлення HTML-коду таблиці у div
        main_div.innerHTML = res_str;
    }

    // Функція для розрахунку (Варіант 23: Сума елементів третього стовпця)
    function fun_build() {
        // Перевірка, чи побудована матриця
        if (!str || !stb) {
            alert("Спочатку побудуйте матрицю!");
            return;
        }

        const TARGET_COLUMN = 3; 
        
        // Перевірка, чи існує третій стовпець
        if (stb < TARGET_COLUMN) {
            alert("Матриця має лише " + stb + " стовпців. Для розрахунку суми 3-го стовпця потрібно щонайменше 3 стовпці.");
            return;
        }

        let sum = 0;
        let str_report = "";

        // Цикл лише по рядках, j фіксоване = 3
        for(let i = 1; i <= str; i++) {
            // Отримання елемента 3-го стовпця (j = 3)
            // Використовуємо name="_i_j" для доступу через форму, як у прикладі
            let element_name = "_" + i + "_" + TARGET_COLUMN;
            
            // Зчитуємо значення і перетворюємо його на число
            // Використовуємо document.getElementsByName бо eval() у сучасному JS не рекомендується 
            let input_element = document.getElementsByName(element_name)[0];

            if (input_element) {
                let value = parseInt(input_element.value);
                if (!isNaN(value)) {
                    sum += value;
                }
            } else {
                 // Цей блок не повинен виконуватися, якщо матриця побудована коректно
                 console.error("Елемент " + element_name + " не знайдено.");
            }
        }
        
        str_report = "Сума елементів " + TARGET_COLUMN + "-го стовпця = " + sum + ";\n";
        
        alert(str_report);
    }
</script>
</head>
<body>
    <form id="main_form">
        <table>
            <tr>
                <td>Кількість рядків</td>
                <td><input type="text" id="t_str" value="5"></td>
            </tr>
            <tr>
                <td>Кількість стовпців</td>
                <td><input type="text" id="t_stb" value="5"></td>
            </tr>
            <tr>
                <td><input type="button" onClick="fun();" value="Побудувати матрицю"></td>
            </tr>
            <tr>
                <td><input type="button" onClick="fun_build();" value="Розрахувати"></td>
            </tr>
        </table>
        
        <br>
        <div id="main_div"></div>
    </form>
</body>
</html>